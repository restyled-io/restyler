<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Data.Conduit.Network</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Data.Conduit.Network.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">conduit-extra-1.3.0: Batteries included conduit: adapters for common libraries.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell98</td></tr></table><p class="caption">Data.Conduit.Network</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Basic utilities</a></li><li><a href="#g:2">Simple TCP server/client interface.</a><ul><li><a href="#g:3">Server</a></li><li><a href="#g:4">Client</a></li><li><a href="#g:5">Getters</a></li><li><a href="#g:6">Setters</a></li></ul></li><li><a href="#g:7">Types</a></li></ul></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:sourceSocket">sourceSocket</a> :: <a href="../base-4.10.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; <a href="../network-2.6.3.5/Network-Socket.html#t:Socket">Socket</a> -&gt; <a href="../conduit-1.3.0.2/Data-Conduit.html#t:ConduitT">ConduitT</a> i <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a> m ()</li><li class="src short"><a href="#v:sinkSocket">sinkSocket</a> :: <a href="../base-4.10.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; <a href="../network-2.6.3.5/Network-Socket.html#t:Socket">Socket</a> -&gt; <a href="../conduit-1.3.0.2/Data-Conduit.html#t:ConduitT">ConduitT</a> <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a> o m ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:AppData">AppData</a> :: <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a></li><li class="src short"><a href="#v:appSource">appSource</a> :: (<a href="../streaming-commons-0.1.19/Data-Streaming-Network.html#t:HasReadWrite">HasReadWrite</a> ad, <a href="../base-4.10.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m) =&gt; ad -&gt; <a href="../conduit-1.3.0.2/Data-Conduit.html#t:ConduitT">ConduitT</a> i <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a> m ()</li><li class="src short"><a href="#v:appSink">appSink</a> :: (<a href="../streaming-commons-0.1.19/Data-Streaming-Network.html#t:HasReadWrite">HasReadWrite</a> ad, <a href="../base-4.10.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m) =&gt; ad -&gt; <a href="../conduit-1.3.0.2/Data-Conduit.html#t:ConduitT">ConduitT</a> <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a> o m ()</li><li class="src short"><a href="#v:appSockAddr">appSockAddr</a> :: <a href="Data-Conduit-Network.html#t:AppData">AppData</a> -&gt; <a href="../network-2.6.3.5/Network-Socket-Internal.html#t:SockAddr">SockAddr</a></li><li class="src short"><a href="#v:appLocalAddr">appLocalAddr</a> :: <a href="Data-Conduit-Network.html#t:AppData">AppData</a> -&gt; <a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../network-2.6.3.5/Network-Socket-Internal.html#t:SockAddr">SockAddr</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:ServerSettings">ServerSettings</a> :: <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a></li><li class="src short"><a href="#v:serverSettings">serverSettings</a> :: <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Data-Conduit-Network.html#t:HostPreference">HostPreference</a> -&gt; <a href="Data-Conduit-Network.html#t:ServerSettings">ServerSettings</a></li><li class="src short"><a href="#v:runTCPServer">runTCPServer</a> :: <a href="Data-Conduit-Network.html#t:ServerSettings">ServerSettings</a> -&gt; (<a href="Data-Conduit-Network.html#t:AppData">AppData</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> ()) -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> a</li><li class="src short"><a href="#v:runTCPServerWithHandle">runTCPServerWithHandle</a> :: <a href="Data-Conduit-Network.html#t:ServerSettings">ServerSettings</a> -&gt; <a href="../streaming-commons-0.1.19/Data-Streaming-Network.html#t:ConnectionHandle">ConnectionHandle</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> a</li><li class="src short"><a href="#v:forkTCPServer">forkTCPServer</a> :: <a href="../conduit-1.3.0.2/Conduit.html#t:MonadUnliftIO">MonadUnliftIO</a> m =&gt; <a href="Data-Conduit-Network.html#t:ServerSettings">ServerSettings</a> -&gt; (<a href="Data-Conduit-Network.html#t:AppData">AppData</a> -&gt; m ()) -&gt; m <a href="../base-4.10.1.0/Control-Concurrent.html#t:ThreadId">ThreadId</a></li><li class="src short"><a href="#v:runGeneralTCPServer">runGeneralTCPServer</a> :: <a href="../conduit-1.3.0.2/Conduit.html#t:MonadUnliftIO">MonadUnliftIO</a> m =&gt; <a href="Data-Conduit-Network.html#t:ServerSettings">ServerSettings</a> -&gt; (<a href="Data-Conduit-Network.html#t:AppData">AppData</a> -&gt; m ()) -&gt; m a</li><li class="src short"><span class="keyword">data</span> <a href="#t:ClientSettings">ClientSettings</a> :: <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a></li><li class="src short"><a href="#v:clientSettings">clientSettings</a> :: <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="Data-Conduit-Network.html#t:ClientSettings">ClientSettings</a></li><li class="src short"><a href="#v:runTCPClient">runTCPClient</a> :: <a href="Data-Conduit-Network.html#t:ClientSettings">ClientSettings</a> -&gt; (<a href="Data-Conduit-Network.html#t:AppData">AppData</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> a) -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> a</li><li class="src short"><a href="#v:runGeneralTCPClient">runGeneralTCPClient</a> :: <a href="../conduit-1.3.0.2/Conduit.html#t:MonadUnliftIO">MonadUnliftIO</a> m =&gt; <a href="Data-Conduit-Network.html#t:ClientSettings">ClientSettings</a> -&gt; (<a href="Data-Conduit-Network.html#t:AppData">AppData</a> -&gt; m a) -&gt; m a</li><li class="src short"><a href="#v:getPort">getPort</a> :: <a href="../streaming-commons-0.1.19/Data-Streaming-Network.html#t:HasPort">HasPort</a> a =&gt; a -&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a></li><li class="src short"><a href="#v:getHost">getHost</a> :: <a href="Data-Conduit-Network.html#t:ClientSettings">ClientSettings</a> -&gt; <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a></li><li class="src short"><a href="#v:getAfterBind">getAfterBind</a> :: <a href="../streaming-commons-0.1.19/Data-Streaming-Network.html#t:HasAfterBind">HasAfterBind</a> a =&gt; a -&gt; <a href="../network-2.6.3.5/Network-Socket.html#t:Socket">Socket</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:getNeedLocalAddr">getNeedLocalAddr</a> :: <a href="Data-Conduit-Network.html#t:ServerSettings">ServerSettings</a> -&gt; <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:setPort">setPort</a> :: <a href="../streaming-commons-0.1.19/Data-Streaming-Network.html#t:HasPort">HasPort</a> a =&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; a -&gt; a</li><li class="src short"><a href="#v:setHost">setHost</a> :: <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="Data-Conduit-Network.html#t:ClientSettings">ClientSettings</a> -&gt; <a href="Data-Conduit-Network.html#t:ClientSettings">ClientSettings</a></li><li class="src short"><a href="#v:setAfterBind">setAfterBind</a> :: <a href="../streaming-commons-0.1.19/Data-Streaming-Network.html#t:HasAfterBind">HasAfterBind</a> a =&gt; (<a href="../network-2.6.3.5/Network-Socket.html#t:Socket">Socket</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> ()) -&gt; a -&gt; a</li><li class="src short"><a href="#v:setNeedLocalAddr">setNeedLocalAddr</a> :: <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="Data-Conduit-Network.html#t:ServerSettings">ServerSettings</a> -&gt; <a href="Data-Conduit-Network.html#t:ServerSettings">ServerSettings</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:HostPreference">HostPreference</a> :: <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a></li></ul></div><div id="interface"><h1 id="g:1">Basic utilities</h1><div class="top"><p class="src"><a id="v:sourceSocket" class="def">sourceSocket</a> :: <a href="../base-4.10.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; <a href="../network-2.6.3.5/Network-Socket.html#t:Socket">Socket</a> -&gt; <a href="../conduit-1.3.0.2/Data-Conduit.html#t:ConduitT">ConduitT</a> i <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a> m () <a href="src/Data.Conduit.Network.html#sourceSocket" class="link">Source</a> <a href="#v:sourceSocket" class="selflink">#</a></p><div class="doc"><p>Stream data from the socket.</p><p>This function does <em>not</em> automatically close the socket.</p><p>Since 0.0.0</p></div></div><div class="top"><p class="src"><a id="v:sinkSocket" class="def">sinkSocket</a> :: <a href="../base-4.10.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; <a href="../network-2.6.3.5/Network-Socket.html#t:Socket">Socket</a> -&gt; <a href="../conduit-1.3.0.2/Data-Conduit.html#t:ConduitT">ConduitT</a> <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a> o m () <a href="src/Data.Conduit.Network.html#sinkSocket" class="link">Source</a> <a href="#v:sinkSocket" class="selflink">#</a></p><div class="doc"><p>Stream data to the socket.</p><p>This function does <em>not</em> automatically close the socket.</p><p>Since 0.0.0</p></div></div><h1 id="g:2">Simple TCP server/client interface.</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:AppData" class="def">AppData</a> :: <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> <a href="#t:AppData" class="selflink">#</a></p><div class="doc"><p>The data passed to an <code>Application</code>.</p></div><div class="subs instances"><p id="control.i:AppData" class="caption collapser" onclick="toggleSection('i:AppData')">Instances</p><div id="section.i:AppData" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:AppData:HasReadWrite:1" class="instance expander" onclick="toggleSection('i:id:AppData:HasReadWrite:1')"></span> <a href="../streaming-commons-0.1.19/Data-Streaming-Network.html#t:HasReadWrite">HasReadWrite</a> <a href="Data-Conduit-Network.html#t:AppData">AppData</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:AppData:HasReadWrite:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:readLens">readLens</a> :: <a href="../base-4.10.1.0/Data-Functor.html#t:Functor">Functor</a> f =&gt; (<a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; f (<a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a>)) -&gt; <a href="Data-Conduit-Network.html#t:AppData">AppData</a> -&gt; f <a href="Data-Conduit-Network.html#t:AppData">AppData</a> <a href="#v:readLens" class="selflink">#</a></p><p class="src"><a href="#v:writeLens">writeLens</a> :: <a href="../base-4.10.1.0/Data-Functor.html#t:Functor">Functor</a> f =&gt; ((<a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> ()) -&gt; f (<a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> ())) -&gt; <a href="Data-Conduit-Network.html#t:AppData">AppData</a> -&gt; f <a href="Data-Conduit-Network.html#t:AppData">AppData</a> <a href="#v:writeLens" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:appSource" class="def">appSource</a> :: (<a href="../streaming-commons-0.1.19/Data-Streaming-Network.html#t:HasReadWrite">HasReadWrite</a> ad, <a href="../base-4.10.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m) =&gt; ad -&gt; <a href="../conduit-1.3.0.2/Data-Conduit.html#t:ConduitT">ConduitT</a> i <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a> m () <a href="src/Data.Conduit.Network.html#appSource" class="link">Source</a> <a href="#v:appSource" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:appSink" class="def">appSink</a> :: (<a href="../streaming-commons-0.1.19/Data-Streaming-Network.html#t:HasReadWrite">HasReadWrite</a> ad, <a href="../base-4.10.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m) =&gt; ad -&gt; <a href="../conduit-1.3.0.2/Data-Conduit.html#t:ConduitT">ConduitT</a> <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a> o m () <a href="src/Data.Conduit.Network.html#appSink" class="link">Source</a> <a href="#v:appSink" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:appSockAddr" class="def">appSockAddr</a> :: <a href="Data-Conduit-Network.html#t:AppData">AppData</a> -&gt; <a href="../network-2.6.3.5/Network-Socket-Internal.html#t:SockAddr">SockAddr</a> <a href="#v:appSockAddr" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:appLocalAddr" class="def">appLocalAddr</a> :: <a href="Data-Conduit-Network.html#t:AppData">AppData</a> -&gt; <a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../network-2.6.3.5/Network-Socket-Internal.html#t:SockAddr">SockAddr</a> <a href="#v:appLocalAddr" class="selflink">#</a></p></div><h2 id="g:3">Server</h2><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ServerSettings" class="def">ServerSettings</a> :: <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> <a href="#t:ServerSettings" class="selflink">#</a></p><div class="doc"><p>Settings for a TCP server. It takes a port to listen on, and an optional
 hostname to bind to.</p></div><div class="subs instances"><p id="control.i:ServerSettings" class="caption collapser" onclick="toggleSection('i:ServerSettings')">Instances</p><div id="section.i:ServerSettings" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ServerSettings:HasPort:1" class="instance expander" onclick="toggleSection('i:id:ServerSettings:HasPort:1')"></span> <a href="../streaming-commons-0.1.19/Data-Streaming-Network.html#t:HasPort">HasPort</a> <a href="Data-Conduit-Network.html#t:ServerSettings">ServerSettings</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ServerSettings:HasPort:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:portLens">portLens</a> :: <a href="../base-4.10.1.0/Data-Functor.html#t:Functor">Functor</a> f =&gt; (<a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; f <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a>) -&gt; <a href="Data-Conduit-Network.html#t:ServerSettings">ServerSettings</a> -&gt; f <a href="Data-Conduit-Network.html#t:ServerSettings">ServerSettings</a> <a href="#v:portLens" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ServerSettings:HasAfterBind:2" class="instance expander" onclick="toggleSection('i:id:ServerSettings:HasAfterBind:2')"></span> <a href="../streaming-commons-0.1.19/Data-Streaming-Network.html#t:HasAfterBind">HasAfterBind</a> <a href="Data-Conduit-Network.html#t:ServerSettings">ServerSettings</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ServerSettings:HasAfterBind:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:afterBindLens">afterBindLens</a> :: <a href="../base-4.10.1.0/Data-Functor.html#t:Functor">Functor</a> f =&gt; ((<a href="../network-2.6.3.5/Network-Socket.html#t:Socket">Socket</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> ()) -&gt; f (<a href="../network-2.6.3.5/Network-Socket.html#t:Socket">Socket</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> ())) -&gt; <a href="Data-Conduit-Network.html#t:ServerSettings">ServerSettings</a> -&gt; f <a href="Data-Conduit-Network.html#t:ServerSettings">ServerSettings</a> <a href="#v:afterBindLens" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ServerSettings:HasReadBufferSize:3" class="instance expander" onclick="toggleSection('i:id:ServerSettings:HasReadBufferSize:3')"></span> <a href="../streaming-commons-0.1.19/Data-Streaming-Network.html#t:HasReadBufferSize">HasReadBufferSize</a> <a href="Data-Conduit-Network.html#t:ServerSettings">ServerSettings</a></span></td><td class="doc"><p>Since 0.1.13</p></td></tr><tr><td colspan="2"><div id="section.i:id:ServerSettings:HasReadBufferSize:3" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:readBufferSizeLens">readBufferSizeLens</a> :: <a href="../base-4.10.1.0/Data-Functor.html#t:Functor">Functor</a> f =&gt; (<a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; f <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a>) -&gt; <a href="Data-Conduit-Network.html#t:ServerSettings">ServerSettings</a> -&gt; f <a href="Data-Conduit-Network.html#t:ServerSettings">ServerSettings</a> <a href="#v:readBufferSizeLens" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:serverSettings" class="def">serverSettings</a> :: <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Data-Conduit-Network.html#t:HostPreference">HostPreference</a> -&gt; <a href="Data-Conduit-Network.html#t:ServerSettings">ServerSettings</a> <a href="src/Data.Conduit.Network.html#serverSettings" class="link">Source</a> <a href="#v:serverSettings" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:runTCPServer" class="def">runTCPServer</a> :: <a href="Data-Conduit-Network.html#t:ServerSettings">ServerSettings</a> -&gt; (<a href="Data-Conduit-Network.html#t:AppData">AppData</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> ()) -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> a <a href="#v:runTCPServer" class="selflink">#</a></p><div class="doc"><p>Run an <code>Application</code> with the given settings. This function will create a
 new listening socket, accept connections on it, and spawn a new thread for
 each connection.</p></div></div><div class="top"><p class="src"><a id="v:runTCPServerWithHandle" class="def">runTCPServerWithHandle</a> :: <a href="Data-Conduit-Network.html#t:ServerSettings">ServerSettings</a> -&gt; <a href="../streaming-commons-0.1.19/Data-Streaming-Network.html#t:ConnectionHandle">ConnectionHandle</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> a <a href="#v:runTCPServerWithHandle" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:forkTCPServer" class="def">forkTCPServer</a> :: <a href="../conduit-1.3.0.2/Conduit.html#t:MonadUnliftIO">MonadUnliftIO</a> m =&gt; <a href="Data-Conduit-Network.html#t:ServerSettings">ServerSettings</a> -&gt; (<a href="Data-Conduit-Network.html#t:AppData">AppData</a> -&gt; m ()) -&gt; m <a href="../base-4.10.1.0/Control-Concurrent.html#t:ThreadId">ThreadId</a> <a href="src/Data.Conduit.Network.html#forkTCPServer" class="link">Source</a> <a href="#v:forkTCPServer" class="selflink">#</a></p><div class="doc"><p>Fork a TCP Server</p><p>Will fork the runGeneralTCPServer function but will only return from
 this call when the server is bound to the port and accepting incoming
 connections. Will return the thread id of the server</p><p>Since 1.1.4</p></div></div><div class="top"><p class="src"><a id="v:runGeneralTCPServer" class="def">runGeneralTCPServer</a> :: <a href="../conduit-1.3.0.2/Conduit.html#t:MonadUnliftIO">MonadUnliftIO</a> m =&gt; <a href="Data-Conduit-Network.html#t:ServerSettings">ServerSettings</a> -&gt; (<a href="Data-Conduit-Network.html#t:AppData">AppData</a> -&gt; m ()) -&gt; m a <a href="src/Data.Conduit.Network.html#runGeneralTCPServer" class="link">Source</a> <a href="#v:runGeneralTCPServer" class="selflink">#</a></p><div class="doc"><p>Run a general TCP server</p><p>Same as <code><a href="Data-Conduit-Network.html#v:runTCPServer">runTCPServer</a></code>, except monad can be any instance of
 <code><a href="../conduit-1.3.0.2/Conduit.html#t:MonadUnliftIO">MonadUnliftIO</a></code>.</p><p>Note that any changes to the monadic state performed by individual
 client handlers will be discarded. If you have mutable state you want
 to share among multiple handlers, you need to use some kind of mutable
 variables.</p><p>Since 1.1.3</p></div></div><h2 id="g:4">Client</h2><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ClientSettings" class="def">ClientSettings</a> :: <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> <a href="#t:ClientSettings" class="selflink">#</a></p><div class="doc"><p>Settings for a TCP client, specifying how to connect to the server.</p></div><div class="subs instances"><p id="control.i:ClientSettings" class="caption collapser" onclick="toggleSection('i:ClientSettings')">Instances</p><div id="section.i:ClientSettings" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ClientSettings:HasPort:1" class="instance expander" onclick="toggleSection('i:id:ClientSettings:HasPort:1')"></span> <a href="../streaming-commons-0.1.19/Data-Streaming-Network.html#t:HasPort">HasPort</a> <a href="Data-Conduit-Network.html#t:ClientSettings">ClientSettings</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ClientSettings:HasPort:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:portLens">portLens</a> :: <a href="../base-4.10.1.0/Data-Functor.html#t:Functor">Functor</a> f =&gt; (<a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; f <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a>) -&gt; <a href="Data-Conduit-Network.html#t:ClientSettings">ClientSettings</a> -&gt; f <a href="Data-Conduit-Network.html#t:ClientSettings">ClientSettings</a> <a href="#v:portLens" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ClientSettings:HasReadBufferSize:2" class="instance expander" onclick="toggleSection('i:id:ClientSettings:HasReadBufferSize:2')"></span> <a href="../streaming-commons-0.1.19/Data-Streaming-Network.html#t:HasReadBufferSize">HasReadBufferSize</a> <a href="Data-Conduit-Network.html#t:ClientSettings">ClientSettings</a></span></td><td class="doc"><p>Since 0.1.13</p></td></tr><tr><td colspan="2"><div id="section.i:id:ClientSettings:HasReadBufferSize:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:readBufferSizeLens">readBufferSizeLens</a> :: <a href="../base-4.10.1.0/Data-Functor.html#t:Functor">Functor</a> f =&gt; (<a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; f <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a>) -&gt; <a href="Data-Conduit-Network.html#t:ClientSettings">ClientSettings</a> -&gt; f <a href="Data-Conduit-Network.html#t:ClientSettings">ClientSettings</a> <a href="#v:readBufferSizeLens" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:clientSettings" class="def">clientSettings</a> :: <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="Data-Conduit-Network.html#t:ClientSettings">ClientSettings</a> <a href="src/Data.Conduit.Network.html#clientSettings" class="link">Source</a> <a href="#v:clientSettings" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:runTCPClient" class="def">runTCPClient</a> :: <a href="Data-Conduit-Network.html#t:ClientSettings">ClientSettings</a> -&gt; (<a href="Data-Conduit-Network.html#t:AppData">AppData</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> a) -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> a <a href="#v:runTCPClient" class="selflink">#</a></p><div class="doc"><p>Run an <code>Application</code> by connecting to the specified server.</p></div></div><div class="top"><p class="src"><a id="v:runGeneralTCPClient" class="def">runGeneralTCPClient</a> :: <a href="../conduit-1.3.0.2/Conduit.html#t:MonadUnliftIO">MonadUnliftIO</a> m =&gt; <a href="Data-Conduit-Network.html#t:ClientSettings">ClientSettings</a> -&gt; (<a href="Data-Conduit-Network.html#t:AppData">AppData</a> -&gt; m a) -&gt; m a <a href="src/Data.Conduit.Network.html#runGeneralTCPClient" class="link">Source</a> <a href="#v:runGeneralTCPClient" class="selflink">#</a></p><div class="doc"><p>Run a general TCP client</p><p>Same as <code><a href="Data-Conduit-Network.html#v:runTCPClient">runTCPClient</a></code>, except monad can be any instance of <code><a href="../conduit-1.3.0.2/Conduit.html#t:MonadUnliftIO">MonadUnliftIO</a></code>.</p><p>Since 1.1.3</p></div></div><h2 id="g:5">Getters</h2><div class="top"><p class="src"><a id="v:getPort" class="def">getPort</a> :: <a href="../streaming-commons-0.1.19/Data-Streaming-Network.html#t:HasPort">HasPort</a> a =&gt; a -&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> <a href="#v:getPort" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getHost" class="def">getHost</a> :: <a href="Data-Conduit-Network.html#t:ClientSettings">ClientSettings</a> -&gt; <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a> <a href="#v:getHost" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getAfterBind" class="def">getAfterBind</a> :: <a href="../streaming-commons-0.1.19/Data-Streaming-Network.html#t:HasAfterBind">HasAfterBind</a> a =&gt; a -&gt; <a href="../network-2.6.3.5/Network-Socket.html#t:Socket">Socket</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> () <a href="#v:getAfterBind" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getNeedLocalAddr" class="def">getNeedLocalAddr</a> :: <a href="Data-Conduit-Network.html#t:ServerSettings">ServerSettings</a> -&gt; <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:getNeedLocalAddr" class="selflink">#</a></p></div><h2 id="g:6">Setters</h2><div class="top"><p class="src"><a id="v:setPort" class="def">setPort</a> :: <a href="../streaming-commons-0.1.19/Data-Streaming-Network.html#t:HasPort">HasPort</a> a =&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; a -&gt; a <a href="#v:setPort" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:setHost" class="def">setHost</a> :: <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="Data-Conduit-Network.html#t:ClientSettings">ClientSettings</a> -&gt; <a href="Data-Conduit-Network.html#t:ClientSettings">ClientSettings</a> <a href="#v:setHost" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:setAfterBind" class="def">setAfterBind</a> :: <a href="../streaming-commons-0.1.19/Data-Streaming-Network.html#t:HasAfterBind">HasAfterBind</a> a =&gt; (<a href="../network-2.6.3.5/Network-Socket.html#t:Socket">Socket</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> ()) -&gt; a -&gt; a <a href="#v:setAfterBind" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:setNeedLocalAddr" class="def">setNeedLocalAddr</a> :: <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="Data-Conduit-Network.html#t:ServerSettings">ServerSettings</a> -&gt; <a href="Data-Conduit-Network.html#t:ServerSettings">ServerSettings</a> <a href="#v:setNeedLocalAddr" class="selflink">#</a></p></div><h1 id="g:7">Types</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:HostPreference" class="def">HostPreference</a> :: <a href="../base-4.10.1.0/Data-Kind.html#t:-42-">*</a> <a href="#t:HostPreference" class="selflink">#</a></p><div class="doc"><p>Which host to bind.</p><p>Note: The <code>IsString</code> instance recognizes the following special values:</p><ul><li><code>*</code> means <code>HostAny</code> - &quot;any IPv4 or IPv6 hostname&quot;</li><li><code>*4</code> means <code>HostIPv4</code> - &quot;any IPv4 or IPv6 hostname, IPv4 preferred&quot;</li><li><code>!4</code> means <code>HostIPv4Only</code> - &quot;any IPv4 hostname&quot;</li><li><code>*6</code> means <code>HostIPv6</code>@ - &quot;any IPv4 or IPv6 hostname, IPv6 preferred&quot;</li><li><code>!6</code> means <code>HostIPv6Only</code> - &quot;any IPv6 hostname&quot;</li></ul><p>Note that the permissive <code>*</code> values allow binding to an IPv4 or an
 IPv6 hostname, which means you might be able to successfully bind
 to a port more times than you expect (eg once on the IPv4 localhost
 127.0.0.1 and again on the IPv6 localhost 0:0:0:0:0:0:0:1).</p><p>Any other value is treated as a hostname. As an example, to bind to the
 IPv4 local host only, use &quot;127.0.0.1&quot;.</p></div><div class="subs instances"><p id="control.i:HostPreference" class="caption collapser" onclick="toggleSection('i:HostPreference')">Instances</p><div id="section.i:HostPreference" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:HostPreference:Eq:1" class="instance expander" onclick="toggleSection('i:id:HostPreference:Eq:1')"></span> <a href="../base-4.10.1.0/Data-Eq.html#t:Eq">Eq</a> <a href="Data-Conduit-Network.html#t:HostPreference">HostPreference</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:HostPreference:Eq:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Data-Conduit-Network.html#t:HostPreference">HostPreference</a> -&gt; <a href="Data-Conduit-Network.html#t:HostPreference">HostPreference</a> -&gt; <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Data-Conduit-Network.html#t:HostPreference">HostPreference</a> -&gt; <a href="Data-Conduit-Network.html#t:HostPreference">HostPreference</a> -&gt; <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:HostPreference:Ord:2" class="instance expander" onclick="toggleSection('i:id:HostPreference:Ord:2')"></span> <a href="../base-4.10.1.0/Data-Ord.html#t:Ord">Ord</a> <a href="Data-Conduit-Network.html#t:HostPreference">HostPreference</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:HostPreference:Ord:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:compare">compare</a> :: <a href="Data-Conduit-Network.html#t:HostPreference">HostPreference</a> -&gt; <a href="Data-Conduit-Network.html#t:HostPreference">HostPreference</a> -&gt; <a href="../base-4.10.1.0/Data-Ord.html#t:Ordering">Ordering</a> <a href="#v:compare" class="selflink">#</a></p><p class="src"><a href="#v:-60-">(&lt;)</a> :: <a href="Data-Conduit-Network.html#t:HostPreference">HostPreference</a> -&gt; <a href="Data-Conduit-Network.html#t:HostPreference">HostPreference</a> -&gt; <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-60-" class="selflink">#</a></p><p class="src"><a href="#v:-60--61-">(&lt;=)</a> :: <a href="Data-Conduit-Network.html#t:HostPreference">HostPreference</a> -&gt; <a href="Data-Conduit-Network.html#t:HostPreference">HostPreference</a> -&gt; <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-60--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62-">(&gt;)</a> :: <a href="Data-Conduit-Network.html#t:HostPreference">HostPreference</a> -&gt; <a href="Data-Conduit-Network.html#t:HostPreference">HostPreference</a> -&gt; <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-62-" class="selflink">#</a></p><p class="src"><a href="#v:-62--61-">(&gt;=)</a> :: <a href="Data-Conduit-Network.html#t:HostPreference">HostPreference</a> -&gt; <a href="Data-Conduit-Network.html#t:HostPreference">HostPreference</a> -&gt; <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-62--61-" class="selflink">#</a></p><p class="src"><a href="#v:max">max</a> :: <a href="Data-Conduit-Network.html#t:HostPreference">HostPreference</a> -&gt; <a href="Data-Conduit-Network.html#t:HostPreference">HostPreference</a> -&gt; <a href="Data-Conduit-Network.html#t:HostPreference">HostPreference</a> <a href="#v:max" class="selflink">#</a></p><p class="src"><a href="#v:min">min</a> :: <a href="Data-Conduit-Network.html#t:HostPreference">HostPreference</a> -&gt; <a href="Data-Conduit-Network.html#t:HostPreference">HostPreference</a> -&gt; <a href="Data-Conduit-Network.html#t:HostPreference">HostPreference</a> <a href="#v:min" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:HostPreference:Read:3" class="instance expander" onclick="toggleSection('i:id:HostPreference:Read:3')"></span> <a href="../base-4.10.1.0/Text-Read.html#t:Read">Read</a> <a href="Data-Conduit-Network.html#t:HostPreference">HostPreference</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:HostPreference:Read:3" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:readsPrec">readsPrec</a> :: <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.10.1.0/Text-ParserCombinators-ReadP.html#t:ReadS">ReadS</a> <a href="Data-Conduit-Network.html#t:HostPreference">HostPreference</a> <a href="#v:readsPrec" class="selflink">#</a></p><p class="src"><a href="#v:readList">readList</a> :: <a href="../base-4.10.1.0/Text-ParserCombinators-ReadP.html#t:ReadS">ReadS</a> [<a href="Data-Conduit-Network.html#t:HostPreference">HostPreference</a>] <a href="#v:readList" class="selflink">#</a></p><p class="src"><a href="#v:readPrec">readPrec</a> :: <a href="../base-4.10.1.0/Text-ParserCombinators-ReadPrec.html#t:ReadPrec">ReadPrec</a> <a href="Data-Conduit-Network.html#t:HostPreference">HostPreference</a> <a href="#v:readPrec" class="selflink">#</a></p><p class="src"><a href="#v:readListPrec">readListPrec</a> :: <a href="../base-4.10.1.0/Text-ParserCombinators-ReadPrec.html#t:ReadPrec">ReadPrec</a> [<a href="Data-Conduit-Network.html#t:HostPreference">HostPreference</a>] <a href="#v:readListPrec" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:HostPreference:Show:4" class="instance expander" onclick="toggleSection('i:id:HostPreference:Show:4')"></span> <a href="../base-4.10.1.0/Text-Show.html#t:Show">Show</a> <a href="Data-Conduit-Network.html#t:HostPreference">HostPreference</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:HostPreference:Show:4" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Data-Conduit-Network.html#t:HostPreference">HostPreference</a> -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Data-Conduit-Network.html#t:HostPreference">HostPreference</a> -&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Data-Conduit-Network.html#t:HostPreference">HostPreference</a>] -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:HostPreference:IsString:5" class="instance expander" onclick="toggleSection('i:id:HostPreference:IsString:5')"></span> <a href="../base-4.10.1.0/Data-String.html#t:IsString">IsString</a> <a href="Data-Conduit-Network.html#t:HostPreference">HostPreference</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:HostPreference:IsString:5" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fromString">fromString</a> :: <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> -&gt; <a href="Data-Conduit-Network.html#t:HostPreference">HostPreference</a> <a href="#v:fromString" class="selflink">#</a></p></div></div></td></tr></table></div></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.18.1</p></div></body></html>