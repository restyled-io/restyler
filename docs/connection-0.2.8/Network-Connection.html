<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Network.Connection</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Network.Connection.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">connection-0.2.8: Simple and easy network connections API</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>License</th><td>BSD-style</td></tr><tr><th>Maintainer</th><td>Vincent Hanquez &lt;vincent@snarc.org&gt;</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Portability</th><td>portable</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell98</td></tr></table><p class="caption">Network.Connection</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Type for a connection</a></li><li><a href="#g:2">Exceptions</a></li><li><a href="#g:3">Library initialization</a></li><li><a href="#g:4">Connection operation</a></li><li><a href="#g:5">Sending and receiving data</a></li><li><a href="#g:6">TLS related operation</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Simple connection abstraction</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:Connection">Connection</a></li><li class="src short"><a href="#v:connectionID">connectionID</a> :: <a href="Network-Connection.html#t:Connection">Connection</a> -&gt; ConnectionID</li><li class="src short"><span class="keyword">data</span> <a href="#t:ConnectionParams">ConnectionParams</a> = <a href="#v:ConnectionParams">ConnectionParams</a> {<ul class="subs"><li><a href="#v:connectionHostname">connectionHostname</a> :: <a href="../network-2.6.3.5/Network-Socket.html#t:HostName">HostName</a></li><li><a href="#v:connectionPort">connectionPort</a> :: <a href="../network-2.6.3.5/Network-Socket-Internal.html#t:PortNumber">PortNumber</a></li><li><a href="#v:connectionUseSecure">connectionUseSecure</a> :: <a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Network-Connection.html#t:TLSSettings">TLSSettings</a></li><li><a href="#v:connectionUseSocks">connectionUseSocks</a> :: <a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Network-Connection.html#t:ProxySettings">ProxySettings</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:TLSSettings">TLSSettings</a><ul class="subs"><li>= <a href="#v:TLSSettingsSimple">TLSSettingsSimple</a> { <ul class="subs"><li><a href="#v:settingDisableCertificateValidation">settingDisableCertificateValidation</a> :: <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a></li><li><a href="#v:settingDisableSession">settingDisableSession</a> :: <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a></li><li><a href="#v:settingUseServerName">settingUseServerName</a> :: <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a></li></ul> }</li><li>| <a href="#v:TLSSettings">TLSSettings</a> <a href="../tls-1.4.1/Network-TLS.html#t:ClientParams">ClientParams</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:ProxySettings">ProxySettings</a><ul class="subs"><li>= <a href="#v:SockSettingsSimple">SockSettingsSimple</a> <a href="../network-2.6.3.5/Network-Socket.html#t:HostName">HostName</a> <a href="../network-2.6.3.5/Network-Socket-Internal.html#t:PortNumber">PortNumber</a></li><li>| <a href="#v:SockSettingsEnvironment">SockSettingsEnvironment</a> (<a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../base-4.10.1.0/Data-String.html#t:String">String</a>)</li><li>| <a href="#v:OtherProxy">OtherProxy</a> <a href="../network-2.6.3.5/Network-Socket.html#t:HostName">HostName</a> <a href="../network-2.6.3.5/Network-Socket-Internal.html#t:PortNumber">PortNumber</a></li></ul></li><li class="src short"><span class="keyword">type</span> <a href="#t:SockSettings">SockSettings</a> = <a href="Network-Connection.html#t:ProxySettings">ProxySettings</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:LineTooLong">LineTooLong</a> = <a href="#v:LineTooLong">LineTooLong</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:HostNotResolved">HostNotResolved</a> = <a href="#v:HostNotResolved">HostNotResolved</a> <a href="../base-4.10.1.0/Data-String.html#t:String">String</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:HostCannotConnect">HostCannotConnect</a> = <a href="#v:HostCannotConnect">HostCannotConnect</a> <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> [<a href="../base-4.10.1.0/Control-Exception-Base.html#t:IOException">IOException</a>]</li><li class="src short"><a href="#v:initConnectionContext">initConnectionContext</a> :: <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="Network-Connection.html#t:ConnectionContext">ConnectionContext</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:ConnectionContext">ConnectionContext</a></li><li class="src short"><a href="#v:connectFromHandle">connectFromHandle</a> :: <a href="Network-Connection.html#t:ConnectionContext">ConnectionContext</a> -&gt; <a href="../base-4.10.1.0/GHC-IO-Handle.html#t:Handle">Handle</a> -&gt; <a href="Network-Connection.html#t:ConnectionParams">ConnectionParams</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="Network-Connection.html#t:Connection">Connection</a></li><li class="src short"><a href="#v:connectFromSocket">connectFromSocket</a> :: <a href="Network-Connection.html#t:ConnectionContext">ConnectionContext</a> -&gt; <a href="../network-2.6.3.5/Network-Socket.html#t:Socket">Socket</a> -&gt; <a href="Network-Connection.html#t:ConnectionParams">ConnectionParams</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="Network-Connection.html#t:Connection">Connection</a></li><li class="src short"><a href="#v:connectTo">connectTo</a> :: <a href="Network-Connection.html#t:ConnectionContext">ConnectionContext</a> -&gt; <a href="Network-Connection.html#t:ConnectionParams">ConnectionParams</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="Network-Connection.html#t:Connection">Connection</a></li><li class="src short"><a href="#v:connectionClose">connectionClose</a> :: <a href="Network-Connection.html#t:Connection">Connection</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:connectionGet">connectionGet</a> :: <a href="Network-Connection.html#t:Connection">Connection</a> -&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a></li><li class="src short"><a href="#v:connectionGetExact">connectionGetExact</a> :: <a href="Network-Connection.html#t:Connection">Connection</a> -&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a></li><li class="src short"><a href="#v:connectionGetChunk">connectionGetChunk</a> :: <a href="Network-Connection.html#t:Connection">Connection</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a></li><li class="src short"><a href="#v:connectionGetChunk-39-">connectionGetChunk'</a> :: <a href="Network-Connection.html#t:Connection">Connection</a> -&gt; (<a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; (a, <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a>)) -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> a</li><li class="src short"><a href="#v:connectionGetLine">connectionGetLine</a> :: <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Network-Connection.html#t:Connection">Connection</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a></li><li class="src short"><a href="#v:connectionWaitForInput">connectionWaitForInput</a> :: <a href="Network-Connection.html#t:Connection">Connection</a> -&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:connectionPut">connectionPut</a> :: <a href="Network-Connection.html#t:Connection">Connection</a> -&gt; <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:connectionSetSecure">connectionSetSecure</a> :: <a href="Network-Connection.html#t:ConnectionContext">ConnectionContext</a> -&gt; <a href="Network-Connection.html#t:Connection">Connection</a> -&gt; <a href="Network-Connection.html#t:TLSSettings">TLSSettings</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:connectionIsSecure">connectionIsSecure</a> :: <a href="Network-Connection.html#t:Connection">Connection</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a></li></ul></div><div id="interface"><h1 id="g:1">Type for a connection</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Connection" class="def">Connection</a> <a href="src/Network.Connection.Types.html#Connection" class="link">Source</a> <a href="#t:Connection" class="selflink">#</a></p><div class="doc"><p>This opaque type represent a connection to a destination.</p></div></div><div class="top"><p class="src"><a id="v:connectionID" class="def">connectionID</a> :: <a href="Network-Connection.html#t:Connection">Connection</a> -&gt; ConnectionID <a href="src/Network.Connection.Types.html#connectionID" class="link">Source</a> <a href="#v:connectionID" class="selflink">#</a></p><div class="doc"><p>return a simple tuple of the port and hostname that we're connected to.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ConnectionParams" class="def">ConnectionParams</a> <a href="src/Network.Connection.Types.html#ConnectionParams" class="link">Source</a> <a href="#t:ConnectionParams" class="selflink">#</a></p><div class="doc"><p>Connection Parameters to establish a Connection.</p><p>The strict minimum is an hostname and the port.</p><p>If you need to establish a TLS connection, you should make sure
 connectionUseSecure is correctly set.</p><p>If you need to connect through a SOCKS, you should make sure
 connectionUseSocks is correctly set.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ConnectionParams" class="def">ConnectionParams</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:connectionHostname" class="def">connectionHostname</a> :: <a href="../network-2.6.3.5/Network-Socket.html#t:HostName">HostName</a></dfn><div class="doc"><p>host name to connect to.</p></div></li><li><dfn class="src"><a id="v:connectionPort" class="def">connectionPort</a> :: <a href="../network-2.6.3.5/Network-Socket-Internal.html#t:PortNumber">PortNumber</a></dfn><div class="doc"><p>port number to connect to.</p></div></li><li><dfn class="src"><a id="v:connectionUseSecure" class="def">connectionUseSecure</a> :: <a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Network-Connection.html#t:TLSSettings">TLSSettings</a></dfn><div class="doc"><p>optional TLS parameters.</p></div></li><li><dfn class="src"><a id="v:connectionUseSocks" class="def">connectionUseSocks</a> :: <a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Network-Connection.html#t:ProxySettings">ProxySettings</a></dfn><div class="doc"><p>optional Proxy/Socks configuration.</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:TLSSettings" class="def">TLSSettings</a> <a href="src/Network.Connection.Types.html#TLSSettings" class="link">Source</a> <a href="#t:TLSSettings" class="selflink">#</a></p><div class="doc"><p>TLS Settings that can be either expressed as simple settings,
 or as full blown TLS.Params settings.</p><p>Unless you need access to parameters that are not accessible through the
 simple settings, you should use TLSSettingsSimple.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:TLSSettingsSimple" class="def">TLSSettingsSimple</a></td><td class="doc"><p>Simple TLS settings. recommended to use.</p></td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:settingDisableCertificateValidation" class="def">settingDisableCertificateValidation</a> :: <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a></dfn><div class="doc"><p>Disable certificate verification completely,
   this make TLS/SSL vulnerable to a MITM attack.
   not recommended to use, but for testing.</p></div></li><li><dfn class="src"><a id="v:settingDisableSession" class="def">settingDisableSession</a> :: <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a></dfn><div class="doc"><p>Disable session management. TLS/SSL connections
   will always re-established their context.
   Not Implemented Yet.</p></div></li><li><dfn class="src"><a id="v:settingUseServerName" class="def">settingUseServerName</a> :: <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a></dfn><div class="doc"><p>Use server name extension. Not Implemented Yet.</p></div></li></ul></div></td></tr><tr><td class="src"><a id="v:TLSSettings" class="def">TLSSettings</a> <a href="../tls-1.4.1/Network-TLS.html#t:ClientParams">ClientParams</a></td><td class="doc"><p>full blown TLS Settings directly using TLS.Params. for power users.</p></td></tr></table></div><div class="subs instances"><p id="control.i:TLSSettings" class="caption collapser" onclick="toggleSection('i:TLSSettings')">Instances</p><div id="section.i:TLSSettings" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:TLSSettings:Show:1" class="instance expander" onclick="toggleSection('i:id:TLSSettings:Show:1')"></span> <a href="../base-4.10.1.0/Text-Show.html#t:Show">Show</a> <a href="Network-Connection.html#t:TLSSettings">TLSSettings</a></span> <a href="src/Network.Connection.Types.html#line-77" class="link">Source</a> <a href="#t:TLSSettings" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:TLSSettings:Show:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Network-Connection.html#t:TLSSettings">TLSSettings</a> -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Network-Connection.html#t:TLSSettings">TLSSettings</a> -&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Network-Connection.html#t:TLSSettings">TLSSettings</a>] -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:TLSSettings:Default:2" class="instance expander" onclick="toggleSection('i:id:TLSSettings:Default:2')"></span> <a href="../data-default-class-0.1.2.0/Data-Default-Class.html#t:Default">Default</a> <a href="Network-Connection.html#t:TLSSettings">TLSSettings</a></span> <a href="src/Network.Connection.Types.html#line-79" class="link">Source</a> <a href="#t:TLSSettings" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:TLSSettings:Default:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:def">def</a> :: <a href="Network-Connection.html#t:TLSSettings">TLSSettings</a> <a href="#v:def" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ProxySettings" class="def">ProxySettings</a> <a href="src/Network.Connection.Types.html#ProxySettings" class="link">Source</a> <a href="#t:ProxySettings" class="selflink">#</a></p><div class="doc"><p>Proxy settings for the connection.</p><p>OtherProxy handles specific application-level proxies like HTTP proxies.</p><p>The simple SOCKS settings is just the hostname and portnumber of the SOCKS proxy server.</p><p>That's for now the only settings in the SOCKS package,
 socks password, or any sort of other authentications is not yet implemented.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:SockSettingsSimple" class="def">SockSettingsSimple</a> <a href="../network-2.6.3.5/Network-Socket.html#t:HostName">HostName</a> <a href="../network-2.6.3.5/Network-Socket-Internal.html#t:PortNumber">PortNumber</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:SockSettingsEnvironment" class="def">SockSettingsEnvironment</a> (<a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../base-4.10.1.0/Data-String.html#t:String">String</a>)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:OtherProxy" class="def">OtherProxy</a> <a href="../network-2.6.3.5/Network-Socket.html#t:HostName">HostName</a> <a href="../network-2.6.3.5/Network-Socket-Internal.html#t:PortNumber">PortNumber</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:SockSettings" class="def">SockSettings</a> = <a href="Network-Connection.html#t:ProxySettings">ProxySettings</a> <a href="src/Network.Connection.Types.html#SockSettings" class="link">Source</a> <a href="#t:SockSettings" class="selflink">#</a></p></div><h1 id="g:2">Exceptions</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:LineTooLong" class="def">LineTooLong</a> <a href="src/Network.Connection.html#LineTooLong" class="link">Source</a> <a href="#t:LineTooLong" class="selflink">#</a></p><div class="doc"><p>This is the exception raised if we reached the user specified limit for
 the line in ConnectionGetLine.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:LineTooLong" class="def">LineTooLong</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:LineTooLong" class="caption collapser" onclick="toggleSection('i:LineTooLong')">Instances</p><div id="section.i:LineTooLong" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:LineTooLong:Show:1" class="instance expander" onclick="toggleSection('i:id:LineTooLong:Show:1')"></span> <a href="../base-4.10.1.0/Text-Show.html#t:Show">Show</a> <a href="Network-Connection.html#t:LineTooLong">LineTooLong</a></span> <a href="src/Network.Connection.html#line-88" class="link">Source</a> <a href="#t:LineTooLong" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:LineTooLong:Show:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Network-Connection.html#t:LineTooLong">LineTooLong</a> -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Network-Connection.html#t:LineTooLong">LineTooLong</a> -&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Network-Connection.html#t:LineTooLong">LineTooLong</a>] -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:LineTooLong:Exception:2" class="instance expander" onclick="toggleSection('i:id:LineTooLong:Exception:2')"></span> <a href="../base-4.10.1.0/Control-Exception-Base.html#t:Exception">Exception</a> <a href="Network-Connection.html#t:LineTooLong">LineTooLong</a></span> <a href="src/Network.Connection.html#line-96" class="link">Source</a> <a href="#t:LineTooLong" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:LineTooLong:Exception:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toException">toException</a> :: <a href="Network-Connection.html#t:LineTooLong">LineTooLong</a> -&gt; <a href="../base-4.10.1.0/Control-Exception-Base.html#t:SomeException">SomeException</a> <a href="#v:toException" class="selflink">#</a></p><p class="src"><a href="#v:fromException">fromException</a> :: <a href="../base-4.10.1.0/Control-Exception-Base.html#t:SomeException">SomeException</a> -&gt; <a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Network-Connection.html#t:LineTooLong">LineTooLong</a> <a href="#v:fromException" class="selflink">#</a></p><p class="src"><a href="#v:displayException">displayException</a> :: <a href="Network-Connection.html#t:LineTooLong">LineTooLong</a> -&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> <a href="#v:displayException" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:HostNotResolved" class="def">HostNotResolved</a> <a href="src/Network.Connection.html#HostNotResolved" class="link">Source</a> <a href="#t:HostNotResolved" class="selflink">#</a></p><div class="doc"><p>Exception raised when there's no resolution for a specific host</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:HostNotResolved" class="def">HostNotResolved</a> <a href="../base-4.10.1.0/Data-String.html#t:String">String</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:HostNotResolved" class="caption collapser" onclick="toggleSection('i:HostNotResolved')">Instances</p><div id="section.i:HostNotResolved" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:HostNotResolved:Show:1" class="instance expander" onclick="toggleSection('i:id:HostNotResolved:Show:1')"></span> <a href="../base-4.10.1.0/Text-Show.html#t:Show">Show</a> <a href="Network-Connection.html#t:HostNotResolved">HostNotResolved</a></span> <a href="src/Network.Connection.html#line-91" class="link">Source</a> <a href="#t:HostNotResolved" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:HostNotResolved:Show:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Network-Connection.html#t:HostNotResolved">HostNotResolved</a> -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Network-Connection.html#t:HostNotResolved">HostNotResolved</a> -&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Network-Connection.html#t:HostNotResolved">HostNotResolved</a>] -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:HostNotResolved:Exception:2" class="instance expander" onclick="toggleSection('i:id:HostNotResolved:Exception:2')"></span> <a href="../base-4.10.1.0/Control-Exception-Base.html#t:Exception">Exception</a> <a href="Network-Connection.html#t:HostNotResolved">HostNotResolved</a></span> <a href="src/Network.Connection.html#line-97" class="link">Source</a> <a href="#t:HostNotResolved" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:HostNotResolved:Exception:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toException">toException</a> :: <a href="Network-Connection.html#t:HostNotResolved">HostNotResolved</a> -&gt; <a href="../base-4.10.1.0/Control-Exception-Base.html#t:SomeException">SomeException</a> <a href="#v:toException" class="selflink">#</a></p><p class="src"><a href="#v:fromException">fromException</a> :: <a href="../base-4.10.1.0/Control-Exception-Base.html#t:SomeException">SomeException</a> -&gt; <a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Network-Connection.html#t:HostNotResolved">HostNotResolved</a> <a href="#v:fromException" class="selflink">#</a></p><p class="src"><a href="#v:displayException">displayException</a> :: <a href="Network-Connection.html#t:HostNotResolved">HostNotResolved</a> -&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> <a href="#v:displayException" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:HostCannotConnect" class="def">HostCannotConnect</a> <a href="src/Network.Connection.html#HostCannotConnect" class="link">Source</a> <a href="#t:HostCannotConnect" class="selflink">#</a></p><div class="doc"><p>Exception raised when the connect failed</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:HostCannotConnect" class="def">HostCannotConnect</a> <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> [<a href="../base-4.10.1.0/Control-Exception-Base.html#t:IOException">IOException</a>]</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:HostCannotConnect" class="caption collapser" onclick="toggleSection('i:HostCannotConnect')">Instances</p><div id="section.i:HostCannotConnect" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:HostCannotConnect:Show:1" class="instance expander" onclick="toggleSection('i:id:HostCannotConnect:Show:1')"></span> <a href="../base-4.10.1.0/Text-Show.html#t:Show">Show</a> <a href="Network-Connection.html#t:HostCannotConnect">HostCannotConnect</a></span> <a href="src/Network.Connection.html#line-94" class="link">Source</a> <a href="#t:HostCannotConnect" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:HostCannotConnect:Show:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Network-Connection.html#t:HostCannotConnect">HostCannotConnect</a> -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Network-Connection.html#t:HostCannotConnect">HostCannotConnect</a> -&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Network-Connection.html#t:HostCannotConnect">HostCannotConnect</a>] -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:HostCannotConnect:Exception:2" class="instance expander" onclick="toggleSection('i:id:HostCannotConnect:Exception:2')"></span> <a href="../base-4.10.1.0/Control-Exception-Base.html#t:Exception">Exception</a> <a href="Network-Connection.html#t:HostCannotConnect">HostCannotConnect</a></span> <a href="src/Network.Connection.html#line-98" class="link">Source</a> <a href="#t:HostCannotConnect" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:HostCannotConnect:Exception:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toException">toException</a> :: <a href="Network-Connection.html#t:HostCannotConnect">HostCannotConnect</a> -&gt; <a href="../base-4.10.1.0/Control-Exception-Base.html#t:SomeException">SomeException</a> <a href="#v:toException" class="selflink">#</a></p><p class="src"><a href="#v:fromException">fromException</a> :: <a href="../base-4.10.1.0/Control-Exception-Base.html#t:SomeException">SomeException</a> -&gt; <a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Network-Connection.html#t:HostCannotConnect">HostCannotConnect</a> <a href="#v:fromException" class="selflink">#</a></p><p class="src"><a href="#v:displayException">displayException</a> :: <a href="Network-Connection.html#t:HostCannotConnect">HostCannotConnect</a> -&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> <a href="#v:displayException" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><h1 id="g:3">Library initialization</h1><div class="top"><p class="src"><a id="v:initConnectionContext" class="def">initConnectionContext</a> :: <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="Network-Connection.html#t:ConnectionContext">ConnectionContext</a> <a href="src/Network.Connection.html#initConnectionContext" class="link">Source</a> <a href="#v:initConnectionContext" class="selflink">#</a></p><div class="doc"><p>Initialize the library with shared parameters between connection.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ConnectionContext" class="def">ConnectionContext</a> <a href="src/Network.Connection.Types.html#ConnectionContext" class="link">Source</a> <a href="#t:ConnectionContext" class="selflink">#</a></p><div class="doc"><p>Shared values (certificate store, sessions, ..) between connections</p><p>At the moment, this is only strictly needed to shared sessions and certificates
 when using a TLS enabled connection.</p></div></div><h1 id="g:4">Connection operation</h1><div class="top"><p class="src"><a id="v:connectFromHandle" class="def">connectFromHandle</a> :: <a href="Network-Connection.html#t:ConnectionContext">ConnectionContext</a> -&gt; <a href="../base-4.10.1.0/GHC-IO-Handle.html#t:Handle">Handle</a> -&gt; <a href="Network-Connection.html#t:ConnectionParams">ConnectionParams</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="Network-Connection.html#t:Connection">Connection</a> <a href="src/Network.Connection.html#connectFromHandle" class="link">Source</a> <a href="#v:connectFromHandle" class="selflink">#</a></p><div class="doc"><p>Use an already established handle to create a connection object.</p><p>if the TLS Settings is set, it will do the handshake with the server.
 The SOCKS settings have no impact here, as the handle is already established</p></div></div><div class="top"><p class="src"><a id="v:connectFromSocket" class="def">connectFromSocket</a> :: <a href="Network-Connection.html#t:ConnectionContext">ConnectionContext</a> -&gt; <a href="../network-2.6.3.5/Network-Socket.html#t:Socket">Socket</a> -&gt; <a href="Network-Connection.html#t:ConnectionParams">ConnectionParams</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="Network-Connection.html#t:Connection">Connection</a> <a href="src/Network.Connection.html#connectFromSocket" class="link">Source</a> <a href="#v:connectFromSocket" class="selflink">#</a></p><div class="doc"><p>Use an already established handle to create a connection object.</p><p>if the TLS Settings is set, it will do the handshake with the server.
 The SOCKS settings have no impact here, as the handle is already established</p></div></div><div class="top"><p class="src"><a id="v:connectTo" class="def">connectTo</a> <a href="src/Network.Connection.html#connectTo" class="link">Source</a> <a href="#v:connectTo" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Network-Connection.html#t:ConnectionContext">ConnectionContext</a></td><td class="doc"><p>The global context of this connection.</p></td></tr><tr><td class="src">-&gt; <a href="Network-Connection.html#t:ConnectionParams">ConnectionParams</a></td><td class="doc"><p>The parameters for this connection (where to connect, and such).</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="Network-Connection.html#t:Connection">Connection</a></td><td class="doc"><p>The new established connection on success.</p></td></tr></table></div><div class="doc"><p>connect to a destination using the parameter</p></div></div><div class="top"><p class="src"><a id="v:connectionClose" class="def">connectionClose</a> :: <a href="Network-Connection.html#t:Connection">Connection</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> () <a href="src/Network.Connection.html#connectionClose" class="link">Source</a> <a href="#v:connectionClose" class="selflink">#</a></p><div class="doc"><p>Close a connection.</p></div></div><h1 id="g:5">Sending and receiving data</h1><div class="top"><p class="src"><a id="v:connectionGet" class="def">connectionGet</a> :: <a href="Network-Connection.html#t:Connection">Connection</a> -&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a> <a href="src/Network.Connection.html#connectionGet" class="link">Source</a> <a href="#v:connectionGet" class="selflink">#</a></p><div class="doc"><p>Get some bytes from a connection.</p><p>The size argument is just the maximum that could be returned to the user.
 The call will return as soon as there's data, even if there's less
 than requested.  Hence, it behaves like <code><a href="../bytestring-0.10.8.2/Data-ByteString.html#v:hGetSome">hGetSome</a></code>.</p><p>On end of input, <code><a href="Network-Connection.html#v:connectionGet">connectionGet</a></code> returns 0, but subsequent calls will throw
 an <code><a href="E.html#v:isEOFError">isEOFError</a></code> exception.</p></div></div><div class="top"><p class="src"><a id="v:connectionGetExact" class="def">connectionGetExact</a> :: <a href="Network-Connection.html#t:Connection">Connection</a> -&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a> <a href="src/Network.Connection.html#connectionGetExact" class="link">Source</a> <a href="#v:connectionGetExact" class="selflink">#</a></p><div class="doc"><p>Get exact count of bytes from a connection.</p><p>The size argument is the exact amount that must be returned to the user.
 The call will wait until all data is available.  Hence, it behaves like
 <code><a href="../bytestring-0.10.8.2/Data-ByteString.html#v:hGet">hGet</a></code>.</p><p>On end of input, <code><a href="Network-Connection.html#v:connectionGetExact">connectionGetExact</a></code> will throw an <code><a href="E.html#v:isEOFError">isEOFError</a></code>
 exception.</p></div></div><div class="top"><p class="src"><a id="v:connectionGetChunk" class="def">connectionGetChunk</a> :: <a href="Network-Connection.html#t:Connection">Connection</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a> <a href="src/Network.Connection.html#connectionGetChunk" class="link">Source</a> <a href="#v:connectionGetChunk" class="selflink">#</a></p><div class="doc"><p>Get the next block of data from the connection.</p></div></div><div class="top"><p class="src"><a id="v:connectionGetChunk-39-" class="def">connectionGetChunk'</a> :: <a href="Network-Connection.html#t:Connection">Connection</a> -&gt; (<a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; (a, <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a>)) -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> a <a href="src/Network.Connection.html#connectionGetChunk%27" class="link">Source</a> <a href="#v:connectionGetChunk-39-" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Network-Connection.html#v:connectionGetChunk">connectionGetChunk</a></code>, but return the unused portion to the buffer,
 where it will be the next chunk read.</p></div></div><div class="top"><p class="src"><a id="v:connectionGetLine" class="def">connectionGetLine</a> <a href="src/Network.Connection.html#connectionGetLine" class="link">Source</a> <a href="#v:connectionGetLine" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>Maximum number of bytes before raising a LineTooLong exception</p></td></tr><tr><td class="src">-&gt; <a href="Network-Connection.html#t:Connection">Connection</a></td><td class="doc"><p>Connection</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a></td><td class="doc"><p>The received line with the LF trimmed</p></td></tr></table></div><div class="doc"><p>Get the next line, using ASCII LF as the line terminator.</p><p>This throws an <code>isEOFError</code> exception on end of input, and LineTooLong when
 the number of bytes gathered is over the limit without a line terminator.</p><p>The actual line returned can be bigger than the limit specified, provided
 that the last chunk returned by the underlaying backend contains a LF.
 In another world only when we need more input and limit is reached that the
 LineTooLong exception will be raised.</p><p>An end of file will be considered as a line terminator too, if line is
 not empty.</p></div></div><div class="top"><p class="src"><a id="v:connectionWaitForInput" class="def">connectionWaitForInput</a> :: <a href="Network-Connection.html#t:Connection">Connection</a> -&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/Network.Connection.html#connectionWaitForInput" class="link">Source</a> <a href="#v:connectionWaitForInput" class="selflink">#</a></p><div class="doc"><p>Wait for input to become available on a connection.</p><p>As with <code><a href="../base-4.10.1.0/GHC-IO-Handle.html#v:hWaitForInput">hWaitForInput</a></code>, the timeout value is given in milliseconds.  If the
 timeout value is less than zero, then <code><a href="Network-Connection.html#v:connectionWaitForInput">connectionWaitForInput</a></code> waits
 indefinitely.</p><p>Unlike <code><a href="../base-4.10.1.0/GHC-IO-Handle.html#v:hWaitForInput">hWaitForInput</a></code>, this function does not do any decoding, so it
 returns true when there is <em>any</em> available input, not just full characters.</p></div></div><div class="top"><p class="src"><a id="v:connectionPut" class="def">connectionPut</a> :: <a href="Network-Connection.html#t:Connection">Connection</a> -&gt; <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> () <a href="src/Network.Connection.html#connectionPut" class="link">Source</a> <a href="#v:connectionPut" class="selflink">#</a></p><div class="doc"><p>Put a block of data in the connection.</p></div></div><h1 id="g:6">TLS related operation</h1><div class="top"><p class="src"><a id="v:connectionSetSecure" class="def">connectionSetSecure</a> :: <a href="Network-Connection.html#t:ConnectionContext">ConnectionContext</a> -&gt; <a href="Network-Connection.html#t:Connection">Connection</a> -&gt; <a href="Network-Connection.html#t:TLSSettings">TLSSettings</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> () <a href="src/Network.Connection.html#connectionSetSecure" class="link">Source</a> <a href="#v:connectionSetSecure" class="selflink">#</a></p><div class="doc"><p>Activate secure layer using the parameters specified.</p><p>This is typically used to negociate a TLS channel on an already
 establish channel, e.g. supporting a STARTTLS command. it also
 flush the received buffer to prevent application confusing
 received data before and after the setSecure call.</p><p>If the connection is already using TLS, nothing else happens.</p></div></div><div class="top"><p class="src"><a id="v:connectionIsSecure" class="def">connectionIsSecure</a> :: <a href="Network-Connection.html#t:Connection">Connection</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/Network.Connection.html#connectionIsSecure" class="link">Source</a> <a href="#v:connectionIsSecure" class="selflink">#</a></p><div class="doc"><p>Returns if the connection is establish securely or not.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.18.1</p></div></body></html>